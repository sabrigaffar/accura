# ๐ง ุฅุตูุงุญ ูุดุงูู ููุญุฉ ุชุญูู ุงูุชุงุฌุฑ

**ุชุงุฑูุฎ:** 2025-10-26  
**ุงูุญุงูุฉ:** ๐ ููุฏ ุงูุนูู

---

## ๐ ุงููุดุงูู ุงูููุจูุบ ุนููุง

### 1๏ธโฃ ุงูุนููุฉ ุงูุงูุชุฑุงุถูุฉ "ุฑูุงู" ๐ฐ
**ุงููุดููุฉ:**
- ุงูุนููุฉ ุซุงุจุชุฉ ุนูู "ุฑูุงู" ูู ูู ููุงู
- ูุง ููุฌุฏ ุฎูุงุฑ ูุชุบููุฑ ุงูุนููุฉ ูู ุงูุฅุนุฏุงุฏุงุช

**ุงูุญู ุงูููุชุฑุญ:**
- โ ุฅุถุงูุฉ ุฅุนุฏุงุฏ ููุนููุฉ ูู Settings
- โ ุญูุธ ูู AsyncStorage ุฃู ูู profile
- โ ุงุณุชุฎุฏุงู ุงูุนููุฉ ุงููุญููุธุฉ ูู ูู ููุงู

**ุงูุฃููููุฉ:** ูุชูุณุทุฉ โ๏ธ

---

### 2๏ธโฃ ุนุฏู ุธููุฑ "ูุชุฌุฑ ูุดุท" ูู ููุญุฉ ุงูุชุญูู ๐ช
**ุงููุดููุฉ:**
- ุจุนุฏ ุฅูุดุงุก ูุชุฌุฑ ุฌุฏูุฏุ ูุง ูุธูุฑ ููุชุฌุฑ ูุดุท
- ุงูุฅุญุตุงุฆูุงุช ุชุธูุฑ 0 ุฃู ุบูุฑ ููุทููุฉ

**ุงูุณุจุจ:**
- ุนูุฏ ุฅูุดุงุก merchant ูู setup-merchant.tsx:
  ```typescript
  is_active: true  // โ ูุญู ูุญูุธู ูู active
  ```
- ููู ุฑุจูุง Dashboard ูุง ูุฌูุจ ุงูุจูุงูุงุช ุตุญูุญ

**ุงูุญู:**
- โ ุงูุชุญูู ูู ุงุณุชุนูุงู Dashboard
- โ ุงูุชุฃูุฏ ูู is_active = true ูู merchants table

**ุงูุฃููููุฉ:** ุนุงููุฉ ๐ด

---

### 3๏ธโฃ ุนุฏู ุงุฎุชูุงุฑ ุงููุชุฌุฑ ุนูุฏ ุฅุถุงูุฉ ููุชุฌ ๐ฆ
**ุงููุดููุฉ:**
- ุนูุฏ ุฅุถุงูุฉ ููุชุฌ ูู "ุงูุฅุฌุฑุงุกุงุช ุงูุณุฑูุนุฉ"
- ูุง ููุฌุฏ ุฎูุงุฑ ูุชุญุฏูุฏ ุงููุชุฌุฑ
- ูู ุงูููุช ุงูุญุงููุ ุงูุชุงุฌุฑ ูุฏ ููุชูู ูุชุฌุฑ ูุงุญุฏ ููุท

**ุงูุญู ุงูุญุงูู:**
- ุงูุชุทุจูู ููุชุฑุถ ุฃู ุงูุชุงุฌุฑ ูุฏูู ูุชุฌุฑ ูุงุญุฏ
- ูุณุชุฎุฏู owner_id ูุฑุจุท ุงูููุชุฌ ุจุงููุชุฌุฑ

**ุงูุญู ุงููุณุชูุจูู (ููุชุนุฏุฏ):**
- ุฅุถุงูุฉ dropdown ูุงุฎุชูุงุฑ ุงููุชุฌุฑ ุนูุฏ ุฅุถุงูุฉ ููุชุฌ
- ุฌูุจ ูุงุฆูุฉ ุงููุชุงุฌุฑ ุงูุชุงุจุนุฉ ููุชุงุฌุฑ

**ุงูุฃููููุฉ:** ููุฎูุถุฉ (ูููุณุชูุจู) ๐ก

---

### 4๏ธโฃ ุนุฏู ูุทุงุจูุฉ ุงูุนููุงู ูู ุงูุฅุนุฏุงุฏุงุช ๐
**ุงููุดููุฉ:**
- ุงูุนููุงู ุงููุฏุฎู ูู complete-profile
- ูุง ูุทุงุจู ุงูุนููุงู ุงููุนุฑูุถ ูู ุงูุฅุนุฏุงุฏุงุช

**ุงูุณุจุจ ุงููุญุชูู:**
- complete-profile ูุญูุธ ูู ุฌุฏูู `addresses`
- Settings ุชุฌูุจ ูู ุฌุฏูู `merchants` โ ุนููุฏ `address`
- ุนุฏู ูุฒุงููุฉ!

**ุงูุญู:**
- โ ุชูุญูุฏ ูุตุฏุฑ ุงูุนููุงู
- โ ุฅูุง ุงุณุชุฎุฏุงู addresses table
- โ ุฃู ูุฒุงููุฉ merchants.address ูุน addresses

**ุงูุฃููููุฉ:** ูุชูุณุทุฉ โ๏ธ

---

### 5๏ธโฃ ๐ด **ุงูุฃูู**: ุงูุชูุฌูู ุงูุฎุงุทุฆ ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู
**ุงููุดููุฉ:**
- ุชุณุฌูู ุชุงุฌุฑ โ โ ูุนูู
- ุฅุบูุงู ุงูุชุทุจูู
- ุชุณุฌูู ุฏุฎูู ูุฑุฉ ุฃุฎุฑู
- โ ููุชุญ ูุงุฌูุฉ ุงูุนููู ุจุฏูุงู ูู ูุงุฌูุฉ ุงูุชุงุฌุฑ!

**ุงูุณุจุจ:**
ุนูุฏูุง ูุญุฏุซ `user_type` ูู `setup-merchant.tsx`:
```typescript
await supabase
  .from('profiles')
  .update({ user_type: 'merchant' })
  .eq('id', user?.id);

// โ ุงููุดููุฉ: AuthContext ูุง ูุนูู ุจุงูุชุบููุฑ!
// AuthContext ูุง ุฒุงู ูุญุชูุธ ุจุงููููุฉ ุงููุฏููุฉ
```

**ุงูุญู:**
```typescript
await supabase
  .from('profiles')
  .update({ user_type: 'merchant' })
  .eq('id', user?.id);

// โ ุงูุญู: ุชุญุฏูุซ AuthContext
await refreshProfile();
```

**ุชู ุงูุชุทุจูู ูู:**
- โ `setup-merchant.tsx`
- โ `setup-driver.tsx`

**ุงูุฃููููุฉ:** ุญุฑุฌุฉ ๐ด๐ด๐ด

---

## โ ุงูุฅุตูุงุญุงุช ุงูููุทุจูุฉ

### Fix #1: ุชุญุฏูุซ AuthContext ุจุนุฏ ุชุบููุฑ user_type

#### ูู setup-merchant.tsx:
```typescript
// ูุจู
const { user, profile } = useAuth();

// ุจุนุฏ
const { user, profile, refreshProfile } = useAuth();

// ููู createMerchantProfile:
await supabase.from('profiles').update({ user_type: 'merchant' })...
await refreshProfile(); // โ ุฌุฏูุฏ
```

#### ูู setup-driver.tsx:
```typescript
// ููุณ ุงูุฅุตูุงุญ
const { user, profile, refreshProfile } = useAuth();
await refreshProfile(); // โ ุจุนุฏ ุชุญุฏูุซ user_type
```

**ุงููุชูุฌุฉ:**
- โ ุจุนุฏ ุฅูุดุงุก ููู ุงูุชุงุฌุฑุ AuthContext ูุชุญุฏุซ ููุฑุงู
- โ ุนูุฏ ุฅุนุงุฏุฉ ูุชุญ ุงูุชุทุจููุ index.tsx ูุฌูุจ user_type ุงูุตุญูุญ
- โ ุงูุชูุฌูู ูุนูู ุจุดูู ุตุญูุญ! ๐

---

## ๐ ุงูุฅุตูุงุญุงุช ุงููุชุจููุฉ

### Fix #2: ุฅุตูุงุญ Dashboard Stats (ูุฑูุจุงู)
- [ ] ูุญุต ุงุณุชุนูุงู fetchDashboardData ูู merchant dashboard
- [ ] ุงูุชุฃูุฏ ูู ุฌูุจ ุงููุชุฌุฑ ุงููุดุท
- [ ] ุฅุตูุงุญ ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช

### Fix #3: ุฅุถุงูุฉ ุฅุนุฏุงุฏุงุช ุงูุนููุฉ (ูุฑูุจุงู)
- [ ] ุฅุถุงูุฉ ูู Settings
- [ ] ุญูุธ ูู AsyncStorage
- [ ] ุงุณุชุฎุฏุงู ูู Dashboard

### Fix #4: ูุฒุงููุฉ ุงูุนููุงู (ูุฑูุจุงู)
- [ ] ุฌูุจ ุงูุนููุงู ูู addresses table
- [ ] ุฃู ูุฒุงููุฉ ูุน merchants.address

---

## ๐งช ููููุฉ ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ Fix #1 (ุงูุชูุฌูู):
```
1. ุงุญุฐู ุงูุชุงุฌุฑ ุงููุฏูู ูู Supabase
2. ุณุฌูู ุญุณุงุจ ุฌุฏูุฏ ูุชุงุฌุฑ
3. ุฃููู ูุนูููุงุช ุงููุชุฌุฑ
4. โ ูุฌุจ ุฃู ููุชุญ ููุญุฉ ุชุญูู ุงูุชุงุฌุฑ
5. ุฃุบูู ุงูุชุทุจูู
6. ุณุฌูู ุฏุฎูู ูุฑุฉ ุฃุฎุฑู
7. โ ูุฌุจ ุฃู ููุชุญ ููุญุฉ ุชุญูู ุงูุชุงุฌุฑ (ูููุณ ูุงุฌูุฉ ุงูุนููู)
```

---

## ๐ ุญุงูุฉ ุงูุฅุตูุงุญุงุช

| ุงููุดููุฉ | ุงูุญุงูุฉ | ุงูุฃููููุฉ |
|---------|--------|----------|
| 5. ุงูุชูุฌูู ุงูุฎุงุทุฆ | โ ุชู ุงูุญู | ๐ด ุญุฑุฌุฉ |
| 2. ูุชุฌุฑ ูุดุท | ๐ ููุฏ ุงูุนูู | ๐ด ุนุงููุฉ |
| 4. ูุฒุงููุฉ ุงูุนููุงู | โณ ูุฑูุจุงู | โ๏ธ ูุชูุณุทุฉ |
| 1. ุงูุนููุฉ | โณ ูุฑูุจุงู | โ๏ธ ูุชูุณุทุฉ |
| 3. ุงุฎุชูุงุฑ ุงููุชุฌุฑ | โณ ูุณุชูุจูุงู | ๐ก ููุฎูุถุฉ |

---

**ุงูุชุญุฏูุซ ุงูุชุงูู:** ุณุฃุนูู ุนูู ุฅุตูุงุญ Dashboard Stats ูุงููุชุฌุฑ ุงููุดุท ๐

**ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ:** 2025-10-26 22:20
