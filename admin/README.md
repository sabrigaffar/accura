# Web Admin Dashboard - مسافة السكة

لوحة تحكم إدارية متكاملة لمنصة مسافة السكة للتسليم.

## الميزات

- إدارة المستخدمين (عملاء، تجار، سائقين)
- تتبع الطلبات وإدارتها
- لوحة إحصائيات متكاملة
- إدارة التجار والسائقين
- نظام التقارير والإحصائيات
- إعدادات النظام
- سجل التدقيق للعمليات الإدارية
- تصدير البيانات بصيغة CSV
- دعم اللغات المتعددة (العربية والإنجليزية)
- نظام صلاحيات متعدد المستويات
- دعم اللغة العربية مع تخطيط من اليمين إلى اليسار (RTL)

## التقنيات المستخدمة

- React مع TypeScript
- Vite كأداة بناء
- Tailwind CSS للتصميم
- React Router للتنقل
- Recharts لإنشاء الرسوم البيانية
- Supabase لل-backend

## تكامل Supabase

تستخدم لوحة تحكم الأدمن نفس مشروع Supabase الخاص بالتطبيق الرئيسي، مما يعني:

### قواعد البيانات المشتركة:
- نفس URL المشروع
- نفس مفتاح API (ANON KEY)
- نفس الجداول (`profiles`, `orders`, `merchants`, إلخ)

### المصادقة:
- يتم تخزين مستخدمي الأدمن في جدول `profiles` بنفس طريقة المستخدمين الآخرين
- يتم التحقق من `user_type = 'admin'` للسماح بالوصول
- يمكن استخدام مفتاح خدمة (Service Key) للعمليات الإدارية

### أمان الوصول:
- يتم استخدام Row Level Security (RLS) المُعد مسبقًا
- يتم التحقق من صلاحيات الأدمن قبل كل عملية

## التثبيت

1. تأكد من تثبيت Node.js (v16 أو أعلى)
2. انتقل إلى مجلد المشروع:
   ```bash
   cd admin
   ```
3. ثبت التبعيات:
   ```bash
   npm install
   ```
4. قم بنسخ ملف `.env.example` إلى `.env` وقم بتحديث المتغيرات:
   ```bash
   cp .env.example .env
   ```

## التشغيل

لتشغيل خادم التطوير:
```bash
npm run dev
```

الوصول إلى التطبيق على: http://localhost:3000

## الإنشاء للإنتاج

لإنشاء نسخة للإنتاج:
```bash
npm run build
```

الملفات المنتجة ستكون في مجلد `dist`.

## هيكل المجلدات

```
admin/
├── src/
│   ├── pages/          # صفحات التطبيق
│   ├── layouts/        # تخطيطات التطبيق
│   ├── components/     # المكونات القابلة لإعادة الاستخدام
│   ├── lib/            # مكتبات ووظائف مساعدة
│   ├── hooks/          # خطافات React مخصصة
│   ├── contexts/       # سياقات React (المصادقة، الصلاحيات، اللغة)
│   ├── assets/         # الأصول الثابتة
│   ├── App.tsx         # المكون الرئيسي
│   └── main.tsx        # نقطة الدخول
├── public/             # الملفات العامة
├── index.html          # ملف HTML الرئيسي
└── vite.config.ts      # تكوين Vite
```

## صفحات لوحة التحكم

1. **الرئيسية** - لوحة الإحصائيات والمعلومات العامة
2. **إدارة المستخدمين** - عرض وتعديل جميع المستخدمين
3. **إدارة الطلبات** - تتبع الطلبات وإدارتها
4. **إدارة التجار** - عرض وتعديل معلومات التجار
5. **إدارة السائقين** - عرض وتعديل معلومات السائقين
6. **التقارير** - تقارير مفصلة وإحصائيات
7. **الإعدادات** - إعدادات النظام العامة وسجل التدقيق

## نظام الصلاحيات

النظام يدعم مستويات مختلفة من الأدمن:
- **سوبر أدمن** - صلاحيات كاملة
- **أدمن** - إدارة المستخدمين والطلبات والتجار والسائقين
- **دعم** - عرض البيانات فقط
- **مالي** - الوصول إلى التقارير المالية

## تخصيص

### الألوان

الألوان الرئيسية معرفة في ملف `tailwind.config.js`:
- `primary`: #00B074 (أخضر)
- `secondary`: #FFD84D (أصفر)
- `background`: #F5F7FA

### الخطوط

يستخدم التطبيق خطين عربيين:
- `Cairo` للعناوين
- `Tajawal` للنص العادي

### دعم اللغة العربية

التطبيق يدعم اللغة العربية بشكل كامل مع تخطيط من اليمين إلى اليسار (RTL).